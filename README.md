# Unmanned-Surface-Vessel-Studies

A Master of Engineering Academic Project:

  - Guide you to understand surface vessel modelling, model-based and learning-based controllers design, and environmental distubances modelling 
  
  - MATLAB code to simulate the control system to perform the infinite loop path following 
  
  - Requirements for the trajectory tracking simulation:
  
    -  MATLAB 2020a later 
    
    -  [Marine System Simulator](https://www.mathworks.com/matlabcentral/fileexchange/86393-marine-systems-simulator-mss)
    
    -  [Gaussian Process Regression Package](http://gaussianprocess.org/gpml/code/matlab/doc/)

# Content:

  - Problem statement
  - USV modelling
  - Controller design
      - [Feedback linearization as inverse dynamics (FBL)](https://github.com/Thomas-JHR/Unmanned-Surface-Vessel-Studies/blob/main/Feedback%20Linearization.md)
      - PD+FBL controller 
      - Nonlinear PID controller
      - Linear Model Perdictive Controller(MPC)+FBL
      - Nonlinear MPC
      - Hybrid MPC+FBL
      - GRR+PD+FBL controller
      - GPR+Hybrid MPC+FBL controller
  - Linear Extended Kalman Filter
  - Environmental disturbances
 
# Problem statement

  - Design, simulate, as well as possibly build and test, an autonomous water buoy that uses GPS and on-board motors to perform tracking <br/>
 
    designed trajectories in the presence of environmental disturbances including wind and wave.
 
  - Software programming in MATLAB was used to simulate and test the design of the USV control system
 
  - The project is assumed to be operated under the general condition of a slight sea state generated by statistical algorithms such that <br/>
 
    simulation results are presented to analyze how the vessel can overcome disturbance challenges.
 
# USV modelling

  - Heron M300 acts as the main USV platform adapted to software simulation.
    
  - A twin-hull and pontoon-style vessel for aquatic research. 
    
  - Heron M300 is assumed to mitigate the heave, pitch, and roll response of the payload tray when the Heron M300 performs tasks on the <br/>
 
    water surface for simplifying system identification.

<p align="center">
 <img src=https://github.com/Thomas-JHR/Unmanned-Surface-Vessel-Studies/blob/main/Images/clearpath-robotics-heron-unmanned-surface-vessel-3d-model-max-obj-fbx.jpg width=65% height=65%>
</p>

# Controller design

  -  Seven proposed controllers are designed to evaluate the tracking performance whatever the environmental distubances exist.
 
  -  Model-based controllers are briefly presented below and please refer to the code in details.
 
  -  Learning-based controllers are showed in the code section to explain more details.
 
<p align="center">
 <img src=https://github.com/Thomas-JHR/Unmanned-Surface-Vessel-Studies/blob/main/Images/PID.jpg width=65% height=65%>
</p>

<p align="center">
 <img src=https://github.com/Thomas-JHR/Unmanned-Surface-Vessel-Studies/blob/main/Images/PD%2BFBL.jpg width=65% height=65%>
</p>

<p align="center">
 <img src=https://github.com/Thomas-JHR/Unmanned-Surface-Vessel-Studies/blob/main/Images/MPC-based.jpg width=65% height=65%>
</p>

# Linear EKF

  - For simplicity, the Linear EKF is presented as the main estimator based on the vessel system states or poses 
  
  - The linear EKF is acceptable in the project to create a guidance system for the path tracking task and estimate the vessel poses by filtering <br/>

    sensors noise and a basic estimation algorithm
    
  - In the reality for robot localization, the Heron vessel observes the vessel states from its proprioceptive sensors and carries out waypoint <br/> 
 
    navigation for the path following. 

# Environmental disturbances

  - Wind and wave are two major sources to disturb the route tracking behaviour in the project

  - The raw wind and wave data by the andom walk algorithm  

# Parts of preliminary simulation

<p align="center">
<img src=https://github.com/Thomas-JHR/Unmanned-Surface-Vessel-Studies/blob/main/Tex/GIF/Localmap.JPG>
</p><p align="center">  

  - Animation results without the disturbances are shown each of ```controllers.md``` files. 
  
  - If you are intersted in the path following performances under the distubances, please download the code with MSS and <br/> 
    
    GP packages and have fun with them! 
  
  - Detailed statistical data including RMSE and maximum distance errors is not shown in this repository. Please drop me an email for the PDF <br/> 
  
    report version.
  
  - Thruster force control is not perfectly presented due to excessive force outputs of PID, NMP, and GPMPC_FBL controllers at the beginning, <br/> 
  
    and further gain tunning task is needed to approach to the real-world testing. 
